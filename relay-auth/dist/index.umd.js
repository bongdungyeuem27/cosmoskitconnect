(function(A,Ge){typeof exports=="object"&&typeof module<"u"?Ge(exports):typeof define=="function"&&define.amd?define(["exports"],Ge):(A=typeof globalThis<"u"?globalThis:A||self,Ge(A["@cosmoskitconnect/relay-auth"]={}))})(this,function(A){"use strict";function Ge(t){var r=t.default;if(typeof r=="function"){var n=function(){return r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var a=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return t[o]}})}),n}var Ve={},nt={},Xe={},Ye={};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.BrowserRandomSource=void 0;const Ct=65536;class ur{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const r=typeof self<"u"?self.crypto||self.msCrypto:null;r&&r.getRandomValues!==void 0&&(this._crypto=r,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(r){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const n=new Uint8Array(r);for(let o=0;o<n.length;o+=Ct)this._crypto.getRandomValues(n.subarray(o,o+Math.min(n.length-o,Ct)));return n}}Ye.BrowserRandomSource=ur;function ar(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qe={},He={};Object.defineProperty(He,"__esModule",{value:!0});function fr(t){for(var r=0;r<t.length;r++)t[r]=0;return t}He.wipe=fr;var or={},Dr=Object.freeze({__proto__:null,default:or}),cr=Ge(Dr);Object.defineProperty(qe,"__esModule",{value:!0}),qe.NodeRandomSource=void 0;const sr=He;class dr{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof ar<"u"){const r=cr;r&&r.randomBytes&&(this._crypto=r,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(r){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(r);if(n.length!==r)throw new Error("NodeRandomSource: got fewer bytes than requested");const o=new Uint8Array(r);for(let a=0;a<o.length;a++)o[a]=n[a];return(0,sr.wipe)(n),o}}qe.NodeRandomSource=dr,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.SystemRandomSource=void 0;const br=Ye,lr=qe;class hr{constructor(){if(this.isAvailable=!1,this.name="",this._source=new br.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new lr.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(r){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(r)}}Xe.SystemRandomSource=hr;var m={},gt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function r(d,h){var w=d>>>16&65535,E=d&65535,K=h>>>16&65535,V=h&65535;return E*V+(w*V+E*K<<16>>>0)|0}t.mul=Math.imul||r;function n(d,h){return d+h|0}t.add=n;function o(d,h){return d-h|0}t.sub=o;function a(d,h){return d<<h|d>>>32-h}t.rotl=a;function x(d,h){return d<<32-h|d>>>h}t.rotr=x;function U(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}t.isInteger=Number.isInteger||U,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(d){return t.isInteger(d)&&d>=-t.MAX_SAFE_INTEGER&&d<=t.MAX_SAFE_INTEGER}})(gt),Object.defineProperty(m,"__esModule",{value:!0});var mt=gt;function Er(t,r){return r===void 0&&(r=0),(t[r+0]<<8|t[r+1])<<16>>16}m.readInt16BE=Er;function xr(t,r){return r===void 0&&(r=0),(t[r+0]<<8|t[r+1])>>>0}m.readUint16BE=xr;function wr(t,r){return r===void 0&&(r=0),(t[r+1]<<8|t[r])<<16>>16}m.readInt16LE=wr;function yr(t,r){return r===void 0&&(r=0),(t[r+1]<<8|t[r])>>>0}m.readUint16LE=yr;function At(t,r,n){return r===void 0&&(r=new Uint8Array(2)),n===void 0&&(n=0),r[n+0]=t>>>8,r[n+1]=t>>>0,r}m.writeUint16BE=At,m.writeInt16BE=At;function Ut(t,r,n){return r===void 0&&(r=new Uint8Array(2)),n===void 0&&(n=0),r[n+0]=t>>>0,r[n+1]=t>>>8,r}m.writeUint16LE=Ut,m.writeInt16LE=Ut;function it(t,r){return r===void 0&&(r=0),t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]}m.readInt32BE=it;function ut(t,r){return r===void 0&&(r=0),(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0}m.readUint32BE=ut;function at(t,r){return r===void 0&&(r=0),t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]}m.readInt32LE=at;function ft(t,r){return r===void 0&&(r=0),(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r])>>>0}m.readUint32LE=ft;function Ze(t,r,n){return r===void 0&&(r=new Uint8Array(4)),n===void 0&&(n=0),r[n+0]=t>>>24,r[n+1]=t>>>16,r[n+2]=t>>>8,r[n+3]=t>>>0,r}m.writeUint32BE=Ze,m.writeInt32BE=Ze;function Qe(t,r,n){return r===void 0&&(r=new Uint8Array(4)),n===void 0&&(n=0),r[n+0]=t>>>0,r[n+1]=t>>>8,r[n+2]=t>>>16,r[n+3]=t>>>24,r}m.writeUint32LE=Qe,m.writeInt32LE=Qe;function _r(t,r){r===void 0&&(r=0);var n=it(t,r),o=it(t,r+4);return n*4294967296+o-(o>>31)*4294967296}m.readInt64BE=_r;function vr(t,r){r===void 0&&(r=0);var n=ut(t,r),o=ut(t,r+4);return n*4294967296+o}m.readUint64BE=vr;function pr(t,r){r===void 0&&(r=0);var n=at(t,r),o=at(t,r+4);return o*4294967296+n-(n>>31)*4294967296}m.readInt64LE=pr;function Cr(t,r){r===void 0&&(r=0);var n=ft(t,r),o=ft(t,r+4);return o*4294967296+n}m.readUint64LE=Cr;function Lt(t,r,n){return r===void 0&&(r=new Uint8Array(8)),n===void 0&&(n=0),Ze(t/4294967296>>>0,r,n),Ze(t>>>0,r,n+4),r}m.writeUint64BE=Lt,m.writeInt64BE=Lt;function Bt(t,r,n){return r===void 0&&(r=new Uint8Array(8)),n===void 0&&(n=0),Qe(t>>>0,r,n),Qe(t/4294967296>>>0,r,n+4),r}m.writeUint64LE=Bt,m.writeInt64LE=Bt;function gr(t,r,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>r.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var o=0,a=1,x=t/8+n-1;x>=n;x--)o+=r[x]*a,a*=256;return o}m.readUintBE=gr;function mr(t,r,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>r.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var o=0,a=1,x=n;x<n+t/8;x++)o+=r[x]*a,a*=256;return o}m.readUintLE=mr;function Ar(t,r,n,o){if(n===void 0&&(n=new Uint8Array(t/8)),o===void 0&&(o=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!mt.isSafeInteger(r))throw new Error("writeUintBE value must be an integer");for(var a=1,x=t/8+o-1;x>=o;x--)n[x]=r/a&255,a*=256;return n}m.writeUintBE=Ar;function Ur(t,r,n,o){if(n===void 0&&(n=new Uint8Array(t/8)),o===void 0&&(o=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!mt.isSafeInteger(r))throw new Error("writeUintLE value must be an integer");for(var a=1,x=o;x<o+t/8;x++)n[x]=r/a&255,a*=256;return n}m.writeUintLE=Ur;function Lr(t,r){r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(r)}m.readFloat32BE=Lr;function Br(t,r){r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(r,!0)}m.readFloat32LE=Br;function Sr(t,r){r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(r)}m.readFloat64BE=Sr;function Fr(t,r){r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(r,!0)}m.readFloat64LE=Fr;function Ir(t,r,n){r===void 0&&(r=new Uint8Array(4)),n===void 0&&(n=0);var o=new DataView(r.buffer,r.byteOffset,r.byteLength);return o.setFloat32(n,t),r}m.writeFloat32BE=Ir;function Tr(t,r,n){r===void 0&&(r=new Uint8Array(4)),n===void 0&&(n=0);var o=new DataView(r.buffer,r.byteOffset,r.byteLength);return o.setFloat32(n,t,!0),r}m.writeFloat32LE=Tr;function Mr(t,r,n){r===void 0&&(r=new Uint8Array(8)),n===void 0&&(n=0);var o=new DataView(r.buffer,r.byteOffset,r.byteLength);return o.setFloat64(n,t),r}m.writeFloat64BE=Mr;function Nr(t,r,n){r===void 0&&(r=new Uint8Array(8)),n===void 0&&(n=0);var o=new DataView(r.buffer,r.byteOffset,r.byteLength);return o.setFloat64(n,t,!0),r}m.writeFloat64LE=Nr,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const r=Xe,n=m,o=He;t.defaultRandomSource=new r.SystemRandomSource;function a(w,E=t.defaultRandomSource){return E.randomBytes(w)}t.randomBytes=a;function x(w=t.defaultRandomSource){const E=a(4,w),K=(0,n.readUint32LE)(E);return(0,o.wipe)(E),K}t.randomUint32=x;const U="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(w,E=U,K=t.defaultRandomSource){if(E.length<2)throw new Error("randomString charset is too short");if(E.length>256)throw new Error("randomString charset is too long");let V="";const P=E.length,_=256-256%P;for(;w>0;){const B=a(Math.ceil(w*256/_),K);for(let T=0;T<B.length&&w>0;T++){const R=B[T];R<_&&(V+=E.charAt(R%P),w--)}(0,o.wipe)(B)}return V}t.randomString=d;function h(w,E=U,K=t.defaultRandomSource){const V=Math.ceil(w/(Math.log(E.length)/Math.LN2));return d(V,E,K)}t.randomStringForEntropy=h}(nt);var St={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var r=m,n=He;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var o=function(){function d(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},d.prototype.update=function(h,w){if(w===void 0&&(w=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var E=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&w>0;)this._buffer[this._bufferLength++]=h[E++],w--;this._bufferLength===this.blockSize&&(x(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(E=x(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,E,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=h[E++],w--;return this},d.prototype.finish=function(h){if(!this._finished){var w=this._bytesHashed,E=this._bufferLength,K=w/536870912|0,V=w<<3,P=w%128<112?128:256;this._buffer[E]=128;for(var _=E+1;_<P-8;_++)this._buffer[_]=0;r.writeUint32BE(K,this._buffer,P-8),r.writeUint32BE(V,this._buffer,P-4),x(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)r.writeUint32BE(this._stateHi[_],h,_*8),r.writeUint32BE(this._stateLo[_],h,_*8+4);return this},d.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(h){n.wipe(h.stateHi),n.wipe(h.stateLo),h.buffer&&n.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},d}();t.SHA512=o;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function x(d,h,w,E,K,V,P){for(var _=w[0],B=w[1],T=w[2],R=w[3],F=w[4],J=w[5],$=w[6],M=w[7],L=E[0],C=E[1],N=E[2],Ae=E[3],Ce=E[4],Se=E[5],Te=E[6],Fe=E[7],s,c,z,Z,v,b,l,y;P>=128;){for(var ye=0;ye<16;ye++){var X=8*ye+V;d[ye]=r.readUint32BE(K,X),h[ye]=r.readUint32BE(K,X+4)}for(var ye=0;ye<80;ye++){var yt=_,_t=B,vt=T,f=R,D=F,u=J,e=$,i=M,p=L,g=C,I=N,O=Ae,S=Ce,H=Se,_e=Te,Q=Fe;if(s=M,c=Fe,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=(F>>>14|Ce<<32-14)^(F>>>18|Ce<<32-18)^(Ce>>>41-32|F<<32-(41-32)),c=(Ce>>>14|F<<32-14)^(Ce>>>18|F<<32-18)^(F>>>41-32|Ce<<32-(41-32)),v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,s=F&J^~F&$,c=Ce&Se^~Ce&Te,v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,s=a[ye*2],c=a[ye*2+1],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,s=d[ye%16],c=h[ye%16],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,z=l&65535|y<<16,Z=v&65535|b<<16,s=z,c=Z,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=(_>>>28|L<<32-28)^(L>>>34-32|_<<32-(34-32))^(L>>>39-32|_<<32-(39-32)),c=(L>>>28|_<<32-28)^(_>>>34-32|L<<32-(34-32))^(_>>>39-32|L<<32-(39-32)),v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,s=_&B^_&T^B&T,c=L&C^L&N^C&N,v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,i=l&65535|y<<16,Q=v&65535|b<<16,s=f,c=O,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=z,c=Z,v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,f=l&65535|y<<16,O=v&65535|b<<16,B=yt,T=_t,R=vt,F=f,J=D,$=u,M=e,_=i,C=p,N=g,Ae=I,Ce=O,Se=S,Te=H,Fe=_e,L=Q,ye%16===15)for(var X=0;X<16;X++)s=d[X],c=h[X],v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=d[(X+9)%16],c=h[(X+9)%16],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,z=d[(X+1)%16],Z=h[(X+1)%16],s=(z>>>1|Z<<32-1)^(z>>>8|Z<<32-8)^z>>>7,c=(Z>>>1|z<<32-1)^(Z>>>8|z<<32-8)^(Z>>>7|z<<32-7),v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,z=d[(X+14)%16],Z=h[(X+14)%16],s=(z>>>19|Z<<32-19)^(Z>>>61-32|z<<32-(61-32))^z>>>6,c=(Z>>>19|z<<32-19)^(z>>>61-32|Z<<32-(61-32))^(Z>>>6|z<<32-6),v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,d[X]=l&65535|y<<16,h[X]=v&65535|b<<16}s=_,c=L,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[0],c=E[0],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[0]=_=l&65535|y<<16,E[0]=L=v&65535|b<<16,s=B,c=C,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[1],c=E[1],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[1]=B=l&65535|y<<16,E[1]=C=v&65535|b<<16,s=T,c=N,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[2],c=E[2],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[2]=T=l&65535|y<<16,E[2]=N=v&65535|b<<16,s=R,c=Ae,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[3],c=E[3],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[3]=R=l&65535|y<<16,E[3]=Ae=v&65535|b<<16,s=F,c=Ce,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[4],c=E[4],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[4]=F=l&65535|y<<16,E[4]=Ce=v&65535|b<<16,s=J,c=Se,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[5],c=E[5],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[5]=J=l&65535|y<<16,E[5]=Se=v&65535|b<<16,s=$,c=Te,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[6],c=E[6],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[6]=$=l&65535|y<<16,E[6]=Te=v&65535|b<<16,s=M,c=Fe,v=c&65535,b=c>>>16,l=s&65535,y=s>>>16,s=w[7],c=E[7],v+=c&65535,b+=c>>>16,l+=s&65535,y+=s>>>16,b+=v>>>16,l+=b>>>16,y+=l>>>16,w[7]=M=l&65535|y<<16,E[7]=Fe=v&65535|b<<16,V+=128,P-=128}return V}function U(d){var h=new o;h.update(d);var w=h.digest();return h.clean(),w}t.hash=U})(St),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const r=nt,n=St,o=He;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function a(f){const D=new Float64Array(16);if(f)for(let u=0;u<f.length;u++)D[u]=f[u];return D}const x=new Uint8Array(32);x[0]=9;const U=a(),d=a([1]),h=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),E=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),K=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),V=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(f,D){for(let u=0;u<16;u++)f[u]=D[u]|0}function _(f){let D=1;for(let u=0;u<16;u++){let e=f[u]+D+65535;D=Math.floor(e/65536),f[u]=e-D*65536}f[0]+=D-1+37*(D-1)}function B(f,D,u){const e=~(u-1);for(let i=0;i<16;i++){const p=e&(f[i]^D[i]);f[i]^=p,D[i]^=p}}function T(f,D){const u=a(),e=a();for(let i=0;i<16;i++)e[i]=D[i];_(e),_(e),_(e);for(let i=0;i<2;i++){u[0]=e[0]-65517;for(let g=1;g<15;g++)u[g]=e[g]-65535-(u[g-1]>>16&1),u[g-1]&=65535;u[15]=e[15]-32767-(u[14]>>16&1);const p=u[15]>>16&1;u[14]&=65535,B(e,u,1-p)}for(let i=0;i<16;i++)f[2*i]=e[i]&255,f[2*i+1]=e[i]>>8}function R(f,D){let u=0;for(let e=0;e<32;e++)u|=f[e]^D[e];return(1&u-1>>>8)-1}function F(f,D){const u=new Uint8Array(32),e=new Uint8Array(32);return T(u,f),T(e,D),R(u,e)}function J(f){const D=new Uint8Array(32);return T(D,f),D[0]&1}function $(f,D){for(let u=0;u<16;u++)f[u]=D[2*u]+(D[2*u+1]<<8);f[15]&=32767}function M(f,D,u){for(let e=0;e<16;e++)f[e]=D[e]+u[e]}function L(f,D,u){for(let e=0;e<16;e++)f[e]=D[e]-u[e]}function C(f,D,u){let e,i,p=0,g=0,I=0,O=0,S=0,H=0,_e=0,Q=0,ve=0,te=0,ee=0,Y=0,W=0,k=0,j=0,G=0,re=0,pe=0,ge=0,me=0,Ue=0,Le=0,Be=0,Ie=0,Me=0,Oe=0,je=0,We=0,rt=0,pt=0,ir=0,ne=u[0],ie=u[1],ue=u[2],ae=u[3],fe=u[4],oe=u[5],De=u[6],ce=u[7],se=u[8],de=u[9],be=u[10],le=u[11],he=u[12],Ee=u[13],xe=u[14],we=u[15];e=D[0],p+=e*ne,g+=e*ie,I+=e*ue,O+=e*ae,S+=e*fe,H+=e*oe,_e+=e*De,Q+=e*ce,ve+=e*se,te+=e*de,ee+=e*be,Y+=e*le,W+=e*he,k+=e*Ee,j+=e*xe,G+=e*we,e=D[1],g+=e*ne,I+=e*ie,O+=e*ue,S+=e*ae,H+=e*fe,_e+=e*oe,Q+=e*De,ve+=e*ce,te+=e*se,ee+=e*de,Y+=e*be,W+=e*le,k+=e*he,j+=e*Ee,G+=e*xe,re+=e*we,e=D[2],I+=e*ne,O+=e*ie,S+=e*ue,H+=e*ae,_e+=e*fe,Q+=e*oe,ve+=e*De,te+=e*ce,ee+=e*se,Y+=e*de,W+=e*be,k+=e*le,j+=e*he,G+=e*Ee,re+=e*xe,pe+=e*we,e=D[3],O+=e*ne,S+=e*ie,H+=e*ue,_e+=e*ae,Q+=e*fe,ve+=e*oe,te+=e*De,ee+=e*ce,Y+=e*se,W+=e*de,k+=e*be,j+=e*le,G+=e*he,re+=e*Ee,pe+=e*xe,ge+=e*we,e=D[4],S+=e*ne,H+=e*ie,_e+=e*ue,Q+=e*ae,ve+=e*fe,te+=e*oe,ee+=e*De,Y+=e*ce,W+=e*se,k+=e*de,j+=e*be,G+=e*le,re+=e*he,pe+=e*Ee,ge+=e*xe,me+=e*we,e=D[5],H+=e*ne,_e+=e*ie,Q+=e*ue,ve+=e*ae,te+=e*fe,ee+=e*oe,Y+=e*De,W+=e*ce,k+=e*se,j+=e*de,G+=e*be,re+=e*le,pe+=e*he,ge+=e*Ee,me+=e*xe,Ue+=e*we,e=D[6],_e+=e*ne,Q+=e*ie,ve+=e*ue,te+=e*ae,ee+=e*fe,Y+=e*oe,W+=e*De,k+=e*ce,j+=e*se,G+=e*de,re+=e*be,pe+=e*le,ge+=e*he,me+=e*Ee,Ue+=e*xe,Le+=e*we,e=D[7],Q+=e*ne,ve+=e*ie,te+=e*ue,ee+=e*ae,Y+=e*fe,W+=e*oe,k+=e*De,j+=e*ce,G+=e*se,re+=e*de,pe+=e*be,ge+=e*le,me+=e*he,Ue+=e*Ee,Le+=e*xe,Be+=e*we,e=D[8],ve+=e*ne,te+=e*ie,ee+=e*ue,Y+=e*ae,W+=e*fe,k+=e*oe,j+=e*De,G+=e*ce,re+=e*se,pe+=e*de,ge+=e*be,me+=e*le,Ue+=e*he,Le+=e*Ee,Be+=e*xe,Ie+=e*we,e=D[9],te+=e*ne,ee+=e*ie,Y+=e*ue,W+=e*ae,k+=e*fe,j+=e*oe,G+=e*De,re+=e*ce,pe+=e*se,ge+=e*de,me+=e*be,Ue+=e*le,Le+=e*he,Be+=e*Ee,Ie+=e*xe,Me+=e*we,e=D[10],ee+=e*ne,Y+=e*ie,W+=e*ue,k+=e*ae,j+=e*fe,G+=e*oe,re+=e*De,pe+=e*ce,ge+=e*se,me+=e*de,Ue+=e*be,Le+=e*le,Be+=e*he,Ie+=e*Ee,Me+=e*xe,Oe+=e*we,e=D[11],Y+=e*ne,W+=e*ie,k+=e*ue,j+=e*ae,G+=e*fe,re+=e*oe,pe+=e*De,ge+=e*ce,me+=e*se,Ue+=e*de,Le+=e*be,Be+=e*le,Ie+=e*he,Me+=e*Ee,Oe+=e*xe,je+=e*we,e=D[12],W+=e*ne,k+=e*ie,j+=e*ue,G+=e*ae,re+=e*fe,pe+=e*oe,ge+=e*De,me+=e*ce,Ue+=e*se,Le+=e*de,Be+=e*be,Ie+=e*le,Me+=e*he,Oe+=e*Ee,je+=e*xe,We+=e*we,e=D[13],k+=e*ne,j+=e*ie,G+=e*ue,re+=e*ae,pe+=e*fe,ge+=e*oe,me+=e*De,Ue+=e*ce,Le+=e*se,Be+=e*de,Ie+=e*be,Me+=e*le,Oe+=e*he,je+=e*Ee,We+=e*xe,rt+=e*we,e=D[14],j+=e*ne,G+=e*ie,re+=e*ue,pe+=e*ae,ge+=e*fe,me+=e*oe,Ue+=e*De,Le+=e*ce,Be+=e*se,Ie+=e*de,Me+=e*be,Oe+=e*le,je+=e*he,We+=e*Ee,rt+=e*xe,pt+=e*we,e=D[15],G+=e*ne,re+=e*ie,pe+=e*ue,ge+=e*ae,me+=e*fe,Ue+=e*oe,Le+=e*De,Be+=e*ce,Ie+=e*se,Me+=e*de,Oe+=e*be,je+=e*le,We+=e*he,rt+=e*Ee,pt+=e*xe,ir+=e*we,p+=38*re,g+=38*pe,I+=38*ge,O+=38*me,S+=38*Ue,H+=38*Le,_e+=38*Be,Q+=38*Ie,ve+=38*Me,te+=38*Oe,ee+=38*je,Y+=38*We,W+=38*rt,k+=38*pt,j+=38*ir,i=1,e=p+i+65535,i=Math.floor(e/65536),p=e-i*65536,e=g+i+65535,i=Math.floor(e/65536),g=e-i*65536,e=I+i+65535,i=Math.floor(e/65536),I=e-i*65536,e=O+i+65535,i=Math.floor(e/65536),O=e-i*65536,e=S+i+65535,i=Math.floor(e/65536),S=e-i*65536,e=H+i+65535,i=Math.floor(e/65536),H=e-i*65536,e=_e+i+65535,i=Math.floor(e/65536),_e=e-i*65536,e=Q+i+65535,i=Math.floor(e/65536),Q=e-i*65536,e=ve+i+65535,i=Math.floor(e/65536),ve=e-i*65536,e=te+i+65535,i=Math.floor(e/65536),te=e-i*65536,e=ee+i+65535,i=Math.floor(e/65536),ee=e-i*65536,e=Y+i+65535,i=Math.floor(e/65536),Y=e-i*65536,e=W+i+65535,i=Math.floor(e/65536),W=e-i*65536,e=k+i+65535,i=Math.floor(e/65536),k=e-i*65536,e=j+i+65535,i=Math.floor(e/65536),j=e-i*65536,e=G+i+65535,i=Math.floor(e/65536),G=e-i*65536,p+=i-1+37*(i-1),i=1,e=p+i+65535,i=Math.floor(e/65536),p=e-i*65536,e=g+i+65535,i=Math.floor(e/65536),g=e-i*65536,e=I+i+65535,i=Math.floor(e/65536),I=e-i*65536,e=O+i+65535,i=Math.floor(e/65536),O=e-i*65536,e=S+i+65535,i=Math.floor(e/65536),S=e-i*65536,e=H+i+65535,i=Math.floor(e/65536),H=e-i*65536,e=_e+i+65535,i=Math.floor(e/65536),_e=e-i*65536,e=Q+i+65535,i=Math.floor(e/65536),Q=e-i*65536,e=ve+i+65535,i=Math.floor(e/65536),ve=e-i*65536,e=te+i+65535,i=Math.floor(e/65536),te=e-i*65536,e=ee+i+65535,i=Math.floor(e/65536),ee=e-i*65536,e=Y+i+65535,i=Math.floor(e/65536),Y=e-i*65536,e=W+i+65535,i=Math.floor(e/65536),W=e-i*65536,e=k+i+65535,i=Math.floor(e/65536),k=e-i*65536,e=j+i+65535,i=Math.floor(e/65536),j=e-i*65536,e=G+i+65535,i=Math.floor(e/65536),G=e-i*65536,p+=i-1+37*(i-1),f[0]=p,f[1]=g,f[2]=I,f[3]=O,f[4]=S,f[5]=H,f[6]=_e,f[7]=Q,f[8]=ve,f[9]=te,f[10]=ee,f[11]=Y,f[12]=W,f[13]=k,f[14]=j,f[15]=G}function N(f,D){C(f,D,D)}function Ae(f,D){const u=a();let e;for(e=0;e<16;e++)u[e]=D[e];for(e=253;e>=0;e--)N(u,u),e!==2&&e!==4&&C(u,u,D);for(e=0;e<16;e++)f[e]=u[e]}function Ce(f,D){const u=a();let e;for(e=0;e<16;e++)u[e]=D[e];for(e=250;e>=0;e--)N(u,u),e!==1&&C(u,u,D);for(e=0;e<16;e++)f[e]=u[e]}function Se(f,D){const u=a(),e=a(),i=a(),p=a(),g=a(),I=a(),O=a(),S=a(),H=a();L(u,f[1],f[0]),L(H,D[1],D[0]),C(u,u,H),M(e,f[0],f[1]),M(H,D[0],D[1]),C(e,e,H),C(i,f[3],D[3]),C(i,i,w),C(p,f[2],D[2]),M(p,p,p),L(g,e,u),L(I,p,i),M(O,p,i),M(S,e,u),C(f[0],g,I),C(f[1],S,O),C(f[2],O,I),C(f[3],g,S)}function Te(f,D,u){for(let e=0;e<4;e++)B(f[e],D[e],u)}function Fe(f,D){const u=a(),e=a(),i=a();Ae(i,D[2]),C(u,D[0],i),C(e,D[1],i),T(f,e),f[31]^=J(u)<<7}function s(f,D,u){P(f[0],U),P(f[1],d),P(f[2],d),P(f[3],U);for(let e=255;e>=0;--e){const i=u[e/8|0]>>(e&7)&1;Te(f,D,i),Se(D,f),Se(f,f),Te(f,D,i)}}function c(f,D){const u=[a(),a(),a(),a()];P(u[0],E),P(u[1],K),P(u[2],d),C(u[3],E,K),s(f,u,D)}function z(f){if(f.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const D=(0,n.hash)(f);D[0]&=248,D[31]&=127,D[31]|=64;const u=new Uint8Array(32),e=[a(),a(),a(),a()];c(e,D),Fe(u,e);const i=new Uint8Array(64);return i.set(f),i.set(u,32),{publicKey:u,secretKey:i}}t.generateKeyPairFromSeed=z;function Z(f){const D=(0,r.randomBytes)(32,f),u=z(D);return(0,o.wipe)(D),u}t.generateKeyPair=Z;function v(f){if(f.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(f.subarray(32))}t.extractPublicKeyFromSecretKey=v;const b=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function l(f,D){let u,e,i,p;for(e=63;e>=32;--e){for(u=0,i=e-32,p=e-12;i<p;++i)D[i]+=u-16*D[e]*b[i-(e-32)],u=Math.floor((D[i]+128)/256),D[i]-=u*256;D[i]+=u,D[e]=0}for(u=0,i=0;i<32;i++)D[i]+=u-(D[31]>>4)*b[i],u=D[i]>>8,D[i]&=255;for(i=0;i<32;i++)D[i]-=u*b[i];for(e=0;e<32;e++)D[e+1]+=D[e]>>8,f[e]=D[e]&255}function y(f){const D=new Float64Array(64);for(let u=0;u<64;u++)D[u]=f[u];for(let u=0;u<64;u++)f[u]=0;l(f,D)}function ye(f,D){const u=new Float64Array(64),e=[a(),a(),a(),a()],i=(0,n.hash)(f.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;const p=new Uint8Array(64);p.set(i.subarray(32),32);const g=new n.SHA512;g.update(p.subarray(32)),g.update(D);const I=g.digest();g.clean(),y(I),c(e,I),Fe(p,e),g.reset(),g.update(p.subarray(0,32)),g.update(f.subarray(32)),g.update(D);const O=g.digest();y(O);for(let S=0;S<32;S++)u[S]=I[S];for(let S=0;S<32;S++)for(let H=0;H<32;H++)u[S+H]+=O[S]*i[H];return l(p.subarray(32),u),p}t.sign=ye;function X(f,D){const u=a(),e=a(),i=a(),p=a(),g=a(),I=a(),O=a();return P(f[2],d),$(f[1],D),N(i,f[1]),C(p,i,h),L(i,i,f[2]),M(p,f[2],p),N(g,p),N(I,g),C(O,I,g),C(u,O,i),C(u,u,p),Ce(u,u),C(u,u,i),C(u,u,p),C(u,u,p),C(f[0],u,p),N(e,f[0]),C(e,e,p),F(e,i)&&C(f[0],f[0],V),N(e,f[0]),C(e,e,p),F(e,i)?-1:(J(f[0])===D[31]>>7&&L(f[0],U,f[0]),C(f[3],f[0],f[1]),0)}function yt(f,D,u){const e=new Uint8Array(32),i=[a(),a(),a(),a()],p=[a(),a(),a(),a()];if(u.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(X(p,f))return!1;const g=new n.SHA512;g.update(u.subarray(0,32)),g.update(f),g.update(D);const I=g.digest();return y(I),s(i,p,I),c(p,u.subarray(32)),Se(i,p),Fe(e,i),!R(u,e)}t.verify=yt;function _t(f){let D=[a(),a(),a(),a()];if(X(D,f))throw new Error("Ed25519: invalid public key");let u=a(),e=a(),i=D[1];M(u,d,i),L(e,d,i),Ae(e,e),C(u,u,e);let p=new Uint8Array(32);return T(p,u),p}t.convertPublicKeyToX25519=_t;function vt(f){const D=(0,n.hash)(f.subarray(0,32));D[0]&=248,D[31]&=127,D[31]|=64;const u=new Uint8Array(D.subarray(0,32));return(0,o.wipe)(D),u}t.convertSecretKeyToX25519=vt}(Ve);const Or=1e3;function Hr(t){return Math.floor(t/Or)}const ot="EdDSA",Dt="JWT",Re=".",Ke="base64url",ct="utf8",et="utf8",st=":",dt="did",bt="key",$e="base58btc",lt="z",ht="K36",Ft=32,It=32;function Tt(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Rr(t,r){r||(r=t.reduce((a,x)=>a+x.length,0));const n=Tt(r);let o=0;for(const a of t)n.set(a,o),o+=a.length;return n}function Pr(t,r){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),o=0;o<n.length;o++)n[o]=255;for(var a=0;a<t.length;a++){var x=t.charAt(a),U=x.charCodeAt(0);if(n[U]!==255)throw new TypeError(x+" is ambiguous");n[U]=a}var d=t.length,h=t.charAt(0),w=Math.log(d)/Math.log(256),E=Math.log(256)/Math.log(d);function K(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var B=0,T=0,R=0,F=_.length;R!==F&&_[R]===0;)R++,B++;for(var J=(F-R)*E+1>>>0,$=new Uint8Array(J);R!==F;){for(var M=_[R],L=0,C=J-1;(M!==0||L<T)&&C!==-1;C--,L++)M+=256*$[C]>>>0,$[C]=M%d>>>0,M=M/d>>>0;if(M!==0)throw new Error("Non-zero carry");T=L,R++}for(var N=J-T;N!==J&&$[N]===0;)N++;for(var Ae=h.repeat(B);N<J;++N)Ae+=t.charAt($[N]);return Ae}function V(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var B=0;if(_[B]!==" "){for(var T=0,R=0;_[B]===h;)T++,B++;for(var F=(_.length-B)*w+1>>>0,J=new Uint8Array(F);_[B];){var $=n[_.charCodeAt(B)];if($===255)return;for(var M=0,L=F-1;($!==0||M<R)&&L!==-1;L--,M++)$+=d*J[L]>>>0,J[L]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");R=M,B++}if(_[B]!==" "){for(var C=F-R;C!==F&&J[C]===0;)C++;for(var N=new Uint8Array(T+(F-C)),Ae=T;C!==F;)N[Ae++]=J[C++];return N}}}function P(_){var B=V(_);if(B)return B;throw new Error(`Non-${r} character`)}return{encode:K,decodeUnsafe:V,decode:P}}var jr=Pr,Gr=jr;const Mt=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Kr=t=>new TextEncoder().encode(t),$r=t=>new TextDecoder().decode(t);class zr{constructor(r,n,o){this.name=r,this.prefix=n,this.baseEncode=o}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class kr{constructor(r,n,o){if(this.name=r,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=o}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return Nt(this,r)}}class Jr{constructor(r){this.decoders=r}or(r){return Nt(this,r)}decode(r){const n=r[0],o=this.decoders[n];if(o)return o.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Nt=(t,r)=>new Jr({...t.decoders||{[t.prefix]:t},...r.decoders||{[r.prefix]:r}});class Wr{constructor(r,n,o,a){this.name=r,this.prefix=n,this.baseEncode=o,this.baseDecode=a,this.encoder=new zr(r,n,o),this.decoder=new kr(r,n,a)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const tt=({name:t,prefix:r,encode:n,decode:o})=>new Wr(t,r,n,o),ze=({prefix:t,name:r,alphabet:n})=>{const{encode:o,decode:a}=Gr(n,r);return tt({prefix:t,name:r,encode:o,decode:x=>Mt(a(x))})},Vr=(t,r,n,o)=>{const a={};for(let E=0;E<r.length;++E)a[r[E]]=E;let x=t.length;for(;t[x-1]==="=";)--x;const U=new Uint8Array(x*n/8|0);let d=0,h=0,w=0;for(let E=0;E<x;++E){const K=a[t[E]];if(K===void 0)throw new SyntaxError(`Non-${o} character`);h=h<<n|K,d+=n,d>=8&&(d-=8,U[w++]=255&h>>d)}if(d>=n||255&h<<8-d)throw new SyntaxError("Unexpected end of data");return U},Xr=(t,r,n)=>{const o=r[r.length-1]==="=",a=(1<<n)-1;let x="",U=0,d=0;for(let h=0;h<t.length;++h)for(d=d<<8|t[h],U+=8;U>n;)U-=n,x+=r[a&d>>U];if(U&&(x+=r[a&d<<n-U]),o)for(;x.length*n&7;)x+="=";return x},q=({name:t,prefix:r,bitsPerChar:n,alphabet:o})=>tt({prefix:r,name:t,encode(a){return Xr(a,o,n)},decode(a){return Vr(a,o,n,t)}}),Yr=tt({prefix:"\0",name:"identity",encode:t=>$r(t),decode:t=>Kr(t)});var qr=Object.freeze({__proto__:null,identity:Yr});const Zr=q({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Qr=Object.freeze({__proto__:null,base2:Zr});const en=q({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var tn=Object.freeze({__proto__:null,base8:en});const rn=ze({prefix:"9",name:"base10",alphabet:"0123456789"});var nn=Object.freeze({__proto__:null,base10:rn});const un=q({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),an=q({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fn=Object.freeze({__proto__:null,base16:un,base16upper:an});const on=q({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Dn=q({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cn=q({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sn=q({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dn=q({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),bn=q({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ln=q({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hn=q({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),En=q({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xn=Object.freeze({__proto__:null,base32:on,base32upper:Dn,base32pad:cn,base32padupper:sn,base32hex:dn,base32hexupper:bn,base32hexpad:ln,base32hexpadupper:hn,base32z:En});const wn=ze({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yn=ze({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _n=Object.freeze({__proto__:null,base36:wn,base36upper:yn});const vn=ze({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),pn=ze({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Cn=Object.freeze({__proto__:null,base58btc:vn,base58flickr:pn});const gn=q({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mn=q({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),An=q({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Un=q({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ln=Object.freeze({__proto__:null,base64:gn,base64pad:mn,base64url:An,base64urlpad:Un});const Ot=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Bn=Ot.reduce((t,r,n)=>(t[n]=r,t),[]),Sn=Ot.reduce((t,r,n)=>(t[r.codePointAt(0)]=n,t),[]);function Fn(t){return t.reduce((r,n)=>(r+=Bn[n],r),"")}function In(t){const r=[];for(const n of t){const o=Sn[n.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${n}`);r.push(o)}return new Uint8Array(r)}const Tn=tt({prefix:"\u{1F680}",name:"base256emoji",encode:Fn,decode:In});var Mn=Object.freeze({__proto__:null,base256emoji:Tn}),Nn=Rt,Ht=128,On=127,Hn=~On,Rn=Math.pow(2,31);function Rt(t,r,n){r=r||[],n=n||0;for(var o=n;t>=Rn;)r[n++]=t&255|Ht,t/=128;for(;t&Hn;)r[n++]=t&255|Ht,t>>>=7;return r[n]=t|0,Rt.bytes=n-o+1,r}var Pn=Et,jn=128,Pt=127;function Et(t,o){var n=0,o=o||0,a=0,x=o,U,d=t.length;do{if(x>=d)throw Et.bytes=0,new RangeError("Could not decode varint");U=t[x++],n+=a<28?(U&Pt)<<a:(U&Pt)*Math.pow(2,a),a+=7}while(U>=jn);return Et.bytes=x-o,n}var Gn=Math.pow(2,7),Kn=Math.pow(2,14),$n=Math.pow(2,21),zn=Math.pow(2,28),kn=Math.pow(2,35),Jn=Math.pow(2,42),Wn=Math.pow(2,49),Vn=Math.pow(2,56),Xn=Math.pow(2,63),Yn=function(t){return t<Gn?1:t<Kn?2:t<$n?3:t<zn?4:t<kn?5:t<Jn?6:t<Wn?7:t<Vn?8:t<Xn?9:10},qn={encode:Nn,decode:Pn,encodingLength:Yn},jt=qn;const Gt=(t,r,n=0)=>(jt.encode(t,r,n),r),Kt=t=>jt.encodingLength(t),xt=(t,r)=>{const n=r.byteLength,o=Kt(t),a=o+Kt(n),x=new Uint8Array(a+n);return Gt(t,x,0),Gt(n,x,o),x.set(r,a),new Zn(t,n,r,x)};class Zn{constructor(r,n,o,a){this.code=r,this.size=n,this.digest=o,this.bytes=a}}const $t=({name:t,code:r,encode:n})=>new Qn(t,r,n);class Qn{constructor(r,n,o){this.name=r,this.code=n,this.encode=o}digest(r){if(r instanceof Uint8Array){const n=this.encode(r);return n instanceof Uint8Array?xt(this.code,n):n.then(o=>xt(this.code,o))}else throw Error("Unknown type, must be binary type")}}const zt=t=>async r=>new Uint8Array(await crypto.subtle.digest(t,r)),ei=$t({name:"sha2-256",code:18,encode:zt("SHA-256")}),ti=$t({name:"sha2-512",code:19,encode:zt("SHA-512")});var ri=Object.freeze({__proto__:null,sha256:ei,sha512:ti});const kt=0,ni="identity",Jt=Mt;var ii=Object.freeze({__proto__:null,identity:{code:kt,name:ni,encode:Jt,digest:t=>xt(kt,Jt(t))}});new TextEncoder,new TextDecoder;const Wt={...qr,...Qr,...tn,...nn,...fn,...xn,..._n,...Cn,...Ln,...Mn};({...ri,...ii});function Vt(t,r,n,o){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:n},decoder:{decode:o}}}const Xt=Vt("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),wt=Vt("ascii","a",t=>{let r="a";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return r},t=>{t=t.substring(1);const r=Tt(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}),Yt={utf8:Xt,"utf-8":Xt,hex:Wt.base16,latin1:wt,ascii:wt,binary:wt,...Wt};function Pe(t,r="utf8"){const n=Yt[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Ne(t,r="utf8"){const n=Yt[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}const ui=t=>JSON.stringify(t,(r,n)=>typeof n=="bigint"?n.toString()+"n":n),ai=t=>{const r=new RegExp('(?<!")(?<=:)\\b(\\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\\}\\]]|$)',"g"),n=t.replace(r,o=>`"${o}n"`);return JSON.parse(n,(o,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function fi(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ai(t)}catch(r){return console.error("safeJsonParse error:",r),t}}function oi(t){return typeof t=="string"?t:ui(t)||""}function ke(t){return fi(Pe(Ne(t,Ke),ct))}function Je(t){return Pe(Ne(oi(t),ct),Ke)}function qt(t){const r=Ne(ht,$e),n=lt+Pe(Rr([r,t]),$e);return[dt,bt,n].join(st)}function Zt(t){const[r,n,o]=t.split(st);if(r!==dt||n!==bt)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==lt)throw new Error("Issuer must be a key in mulicodec format");const a=Ne(o.slice(1),$e);if(Pe(a.slice(0,2),$e)!==ht)throw new Error('Issuer must be a public key with type "Ed25519"');const x=a.slice(2);if(x.length!==Ft)throw new Error("Issuer must be a public key with length 32 bytes");return x}function Qt(t){return Pe(t,Ke)}function er(t){return Ne(t,Ke)}function tr(t){return Ne([Je(t.header),Je(t.payload)].join(Re),et)}function Di(t){const r=Pe(t,et).split(Re),n=ke(r[0]),o=ke(r[1]);return{header:n,payload:o}}function rr(t){return[Je(t.header),Je(t.payload),Qt(t.signature)].join(Re)}function nr(t){const r=t.split(Re),n=ke(r[0]),o=ke(r[1]),a=er(r[2]),x=Ne(r.slice(0,2).join(Re),et);return{header:n,payload:o,signature:a,data:x}}function ci(t=nt.randomBytes(It)){return Ve.generateKeyPairFromSeed(t)}async function si(t,r,n,o,a=Hr(Date.now())){const x={alg:ot,typ:Dt},U=qt(o.publicKey),d=a+n,h={iss:U,sub:t,aud:r,iat:a,exp:d},w=tr({header:x,payload:h}),E=Ve.sign(o.secretKey,w);return rr({header:x,payload:h,signature:E})}async function di(t){const{header:r,payload:n,data:o,signature:a}=nr(t);if(r.alg!==ot||r.typ!==Dt)throw new Error("JWT must use EdDSA algorithm");const x=Zt(n.iss);return Ve.verify(x,o,a)}A.DATA_ENCODING=et,A.DID_DELIMITER=st,A.DID_METHOD=bt,A.DID_PREFIX=dt,A.JSON_ENCODING=ct,A.JWT_DELIMITER=Re,A.JWT_ENCODING=Ke,A.JWT_IRIDIUM_ALG=ot,A.JWT_IRIDIUM_TYP=Dt,A.KEY_PAIR_SEED_LENGTH=It,A.MULTICODEC_ED25519_BASE=lt,A.MULTICODEC_ED25519_ENCODING=$e,A.MULTICODEC_ED25519_HEADER=ht,A.MULTICODEC_ED25519_LENGTH=Ft,A.decodeData=Di,A.decodeIss=Zt,A.decodeJSON=ke,A.decodeJWT=nr,A.decodeSig=er,A.encodeData=tr,A.encodeIss=qt,A.encodeJSON=Je,A.encodeJWT=rr,A.encodeSig=Qt,A.generateKeyPair=ci,A.signJWT=si,A.verifyJWT=di,Object.defineProperty(A,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
