{"version":3,"file":"index.umd.js","sources":["../../window-getters/dist/index.es.js","../src/index.ts"],"sourcesContent":["function t(o){let r;return typeof window<\"u\"&&typeof window[o]<\"u\"&&(r=window[o]),r}function n(o){const r=t(o);if(!r)throw new Error(`${o} is not defined in Window`);return r}function e(){return n(\"document\")}function i(){return t(\"document\")}function u(){return n(\"navigator\")}function c(){return t(\"navigator\")}function a(){return n(\"location\")}function g(){return t(\"location\")}function f(){return n(\"crypto\")}function w(){return t(\"crypto\")}function d(){return n(\"localStorage\")}function l(){return t(\"localStorage\")}export{w as getCrypto,f as getCryptoOrThrow,i as getDocument,e as getDocumentOrThrow,t as getFromWindow,n as getFromWindowOrThrow,l as getLocalStorage,d as getLocalStorageOrThrow,g as getLocation,a as getLocationOrThrow,c as getNavigator,u as getNavigatorOrThrow};\n//# sourceMappingURL=index.es.js.map\n","import { getDocumentOrThrow, getLocationOrThrow } from \"@cosmoskitconnect/window-getters\";\n\nexport interface IWebsiteMetadata {\n  description: string;\n  url: string;\n  icons: string[];\n  name: string;\n}\n\nexport function getWindowMetadata(): IWebsiteMetadata | null {\n  let doc: Document;\n  let loc: Location;\n\n  try {\n    doc = getDocumentOrThrow();\n    loc = getLocationOrThrow();\n  } catch (e) {\n    return null;\n  }\n\n  function getIcons(): string[] {\n    // eslint-disable-next-line no-undef\n    const links: HTMLCollectionOf<HTMLLinkElement> = doc.getElementsByTagName(\"link\");\n    const icons: string[] = [];\n\n    for (let i = 0; i < links.length; i++) {\n      const link: HTMLLinkElement = links[i];\n\n      const rel: string | null = link.getAttribute(\"rel\");\n      if (rel) {\n        if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n          const href: string | null = link.getAttribute(\"href\");\n\n          if (href) {\n            if (\n              href.toLowerCase().indexOf(\"https:\") === -1 &&\n              href.toLowerCase().indexOf(\"http:\") === -1 &&\n              href.indexOf(\"//\") !== 0\n            ) {\n              let absoluteHref: string = loc.protocol + \"//\" + loc.host;\n\n              if (href.indexOf(\"/\") === 0) {\n                absoluteHref += href;\n              } else {\n                const path: string[] = loc.pathname.split(\"/\");\n                path.pop();\n                const finalPath: string = path.join(\"/\");\n                absoluteHref += finalPath + \"/\" + href;\n              }\n\n              icons.push(absoluteHref);\n            } else if (href.indexOf(\"//\") === 0) {\n              const absoluteUrl: string = loc.protocol + href;\n\n              icons.push(absoluteUrl);\n            } else {\n              icons.push(href);\n            }\n          }\n        }\n      }\n    }\n\n    return icons;\n  }\n\n  function getWindowMetadataOfAny(...args: string[]): string {\n    // eslint-disable-next-line no-undef\n    const metaTags: HTMLCollectionOf<HTMLMetaElement> = doc.getElementsByTagName(\"meta\");\n\n    for (let i = 0; i < metaTags.length; i++) {\n      const tag: HTMLMetaElement = metaTags[i];\n      const attributes: Array<string | null> = [\"itemprop\", \"property\", \"name\"]\n        .map((target: string) => tag.getAttribute(target))\n        .filter((attr: string | null) => {\n          if (attr) {\n            return args.includes(attr);\n          }\n          return false;\n        });\n\n      if (attributes.length && attributes) {\n        const content: string | null = tag.getAttribute(\"content\");\n        if (content) {\n          return content;\n        }\n      }\n    }\n\n    return \"\";\n  }\n\n  function getName(): string {\n    let name: string = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n\n    if (!name) {\n      name = doc.title;\n    }\n\n    return name;\n  }\n\n  function getDescription(): string {\n    const description: string = getWindowMetadataOfAny(\n      \"description\",\n      \"og:description\",\n      \"twitter:description\",\n      \"keywords\",\n    );\n\n    return description;\n  }\n\n  const name: string = getName();\n  const description: string = getDescription();\n  const url: string = loc.origin;\n  const icons: string[] = getIcons();\n\n  const meta: IWebsiteMetadata = {\n    description,\n    url,\n    icons,\n    name,\n  };\n\n  return meta;\n}\n"],"names":["c","O","T"],"mappings":";;;;;;EAAA,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,OAAO,MAAM,CAAC,GAAG,EAAE,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,IAAI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,CAAyG,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC;;ECArP,SAAS,iBAAiB,EAAE,CAAC,IAAIA,GAAC,CAAC,CAAC,CAAC,GAAG,CAACA,GAAC,CAACC,CAAC,EAAE,CAAC,CAAC,CAACC,CAAC,GAAE,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,CAACF,GAAC,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAC,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,EAAC,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAACA,GAAC,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAM,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAACA,GAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,aAAa,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAM,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;;;;;;;;;;"}